{"version":3,"file":"main-B0kNNNTU.js","sources":["../../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '50117384-0c3e90572e841b6f3be625418';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 40;\n\nconst form = document.getElementById('search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nlet lightbox;\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  hideLoader();\n  hideLoadMore();\n});\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  currentQuery = e.target.searchQuery.value.trim();\n  if (!currentQuery) return;\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n  hideLoadMore();\n  showLoader();\n\n  await fetchImages();\n  hideLoader();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  showLoader();\n\n  const prevHeight = gallery.scrollHeight;\n\n  await fetchImages();\n  hideLoader();\n\n  const newHeight = gallery.scrollHeight;\n  const scrollOffset = newHeight - prevHeight - 100; \n  window.scrollBy({\n    top: scrollOffset,\n    behavior: 'smooth',\n  });\n});\n\nasync function fetchImages() {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: currentQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: currentPage,\n        per_page: PER_PAGE,\n      },\n    });\n\n    const hits = response.data.hits;\n    totalHits = response.data.totalHits;\n\n    if (hits.length === 0 && currentPage === 1) {\n      iziToast.error({\n        title: 'Oops',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    const markup = hits.map(createImageCard).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (lightbox) {\n      lightbox.refresh();\n    } else {\n      lightbox = new SimpleLightbox('.gallery a');\n    }\n\n    const totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (currentPage >= totalPages) {\n      hideLoadMore();\n      iziToast.info({\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      showLoadMore();\n    }\n\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n    });\n  }\n}\n\nfunction createImageCard(image) {\n  return `\n    <a class=\"gallery-item\" href=\"${image.largeImageURL}\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      <div class=\"info\">\n        <p><b>Likes:</b> ${image.likes}</p>\n        <p><b>Views:</b> ${image.views}</p>\n        <p><b>Comments:</b> ${image.comments}</p>\n        <p><b>Downloads:</b> ${image.downloads}</p>\n      </div>\n    </a>\n  `;\n}\n\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nfunction showLoadMore() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideLoadMore() {\n  loadMoreBtn.classList.add('is-hidden');\n}"],"names":["API_KEY","BASE_URL","PER_PAGE","form","gallery","loader","loadMoreBtn","currentPage","currentQuery","totalHits","lightbox","hideLoader","hideLoadMore","showLoader","fetchImages","prevHeight","scrollOffset","response","axios","hits","iziToast","markup","createImageCard","SimpleLightbox","totalPages","showLoadMore","image"],"mappings":"6vBAMA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEXC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EACZC,EAGJ,SAAS,iBAAiB,mBAAoB,IAAM,CAClDC,EAAU,EACVC,EAAY,CACd,CAAC,EAEDT,EAAK,iBAAiB,SAAU,MAAM,GAAK,CACzC,EAAE,eAAc,EAChBK,EAAe,EAAE,OAAO,YAAY,MAAM,KAAI,EACzCA,IAELD,EAAc,EACdH,EAAQ,UAAY,GACpBQ,EAAY,EACZC,EAAU,EAEV,MAAMC,EAAW,EACjBH,EAAU,EACZ,CAAC,EAEDL,EAAY,iBAAiB,QAAS,SAAY,CAChDC,IACAM,EAAU,EAEV,MAAME,EAAaX,EAAQ,aAE3B,MAAMU,EAAW,EACjBH,EAAU,EAGV,MAAMK,EADYZ,EAAQ,aACOW,EAAa,IAC9C,OAAO,SAAS,CACd,IAAKC,EACL,SAAU,QACd,CAAG,CACH,CAAC,EAED,eAAeF,GAAc,CAC3B,GAAI,CACF,MAAMG,EAAW,MAAMC,EAAM,IAAIjB,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGQ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMD,EACN,SAAUL,CAClB,CACA,CAAK,EAEKiB,EAAOF,EAAS,KAAK,KAG3B,GAFAR,EAAYQ,EAAS,KAAK,UAEtBE,EAAK,SAAW,GAAKZ,IAAgB,EAAG,CAC1Ca,EAAS,MAAM,CACb,MAAO,OACP,QAAS,0EACjB,CAAO,EACD,MACF,CAEA,MAAMC,EAASF,EAAK,IAAIG,CAAe,EAAE,KAAK,EAAE,EAChDlB,EAAQ,mBAAmB,YAAaiB,CAAM,EAE1CX,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIa,EAAe,YAAY,EAG5C,MAAMC,EAAa,KAAK,KAAKf,EAAYP,CAAQ,EAC7CK,GAAeiB,GACjBZ,EAAY,EACZQ,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,4DACjB,CAAO,GAEDK,EAAY,CAGhB,MAAgB,CACdL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+CACf,CAAK,CACH,CACF,CAEA,SAASE,EAAgBI,EAAO,CAC9B,MAAO;AAAA,oCAC2BA,EAAM,aAAa;AAAA,kBACrCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,2BAE7BA,EAAM,KAAK;AAAA,2BACXA,EAAM,KAAK;AAAA,8BACRA,EAAM,QAAQ;AAAA,+BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAI9C,CAEA,SAASb,GAAa,CACpBR,EAAO,UAAU,OAAO,WAAW,CACrC,CAEA,SAASM,GAAa,CACpBN,EAAO,UAAU,IAAI,WAAW,CAClC,CAEA,SAASoB,GAAe,CACtBnB,EAAY,UAAU,OAAO,WAAW,CAC1C,CAEA,SAASM,GAAe,CACtBN,EAAY,UAAU,IAAI,WAAW,CACvC"}